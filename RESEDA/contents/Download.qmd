
# Download {#download .entry-title}

We show you two platforms which allow users to view and download remote sensing data such as satellite images, aerial photographs, and cartographic products. You will learn how to use them in order to query and download Landsat 8, Sentinel 2 and Sentinel 1 data from the archives.

\

**Landsat Data via USGS EarthExplorer**

[![](./img/USGS_thumb.png)](./Download.qmd#landsatEarth)

\

**Sentinel Data via ESA SciHUB**

[![](./img/ESAsciHUB.png)](./Download.qmd#SentinelScihub)



# Landsat Landsat / EarthExplorer {#landsatEarth}

You will get to know an online platform that lets you search and download Landsat 8 data -- the USGS EarthExplorer. You need dozens of images? -- No problem! Have a look at the [section for bulk and BIG DATA downloading](https://blogs.fu-berlin.de/reseda/landsat-big-data-download/) and do not forget to test your knowledge at the end of this section!

::: {style="background-color:#f1f1f1;padding:18px 30px 1px"}
In this section, the following content awaits you:

**1 USGS EarthExplorer User Interface**\
-- visiting USGS EarthExplorer for the first time\
**2 Registration**\
-- do a registration in order to be allowed to download products\
**3 Perform a Search**\
-- create a search query to get products from the database\
**4 Download a Dataset**\
-- download Landsat Level 1 and Level 2 products\
**EXERCISE**
:::

\

## 1 USGS EarthExplorer User Interface {#EarthExplorer}

The EarthExplorer supports online search in comprehensive databases, quicklook visualizations, metadata export, and data download for earth science data from the archives of the U.S.Geological Survey (USGS). You get to the USGS EarthExplorer via the following URL using any web browser (Firefox in our RESEDA VM):

[https://earthexplorer.usgs.gov/](https://earthexplorer.usgs.gov/){target="_blank"}

Once clicked, the main EarthExplorer graphical user interface (GUI) should be loaded, which is composed of three key elements:

[![](./img/USGS_001.png){.aligncenter}](./img/USGS_001.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[USGS EarthExplorer user interface]{style="color: #686868;font-size: small"}
:::

-   **1 Header Menu Bar**: Buttons for login and registration services, as well as help, RSS and feedback functionalities. After login you can save and load queries here
-   **2 Data Search Side Bar**: Search components are divided among four tabs and allow you to enter search criteria, select datasets to query, enter additional criteria, and review results in a tabular window
-   **3 Image View with Navigation Elements**: embedded Google Maps components to visualize search results, with standard Google Maps navigation tools, i.e., zoom in/ zoom out, street view (lower right corner), and coordinate information of current cursor position (upper right corner). You can toggle between satellite imagery view and GIS data view by selecting the adequate button in the top left corner

\

## 2 Registration

First of all, to fully use the services of the EarthExplorer, you need to register by clicking on the register button in the header menu bar and proceed through the user registration. Only registered users can download data. You definitely need a working email address for this. The information gathered from the registration process is not distributed to other organizations and is only used to determine trends in data usage. You have to work through a user affiliation/data usage and address page:

::: {.h5p-iframe-wrapper style=""}
:::

Once you have completed the registration, you should get an email on your given email address to confirm your account. After confirmation you will be redirected to the login page where you have to fill in your username and password (or click on "login" in the header menu bar).

[![](./img/USGS_008.png)](./img/USGS_008.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[USGS EarthExplorer login formular]{style="color: #686868;font-size: small"}
:::

After login you will notice your username and your "shopping"/ item basked in the header menu bar:

[![](./img/USGS_009.png){.aligncenter}](./img/USGS_009.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Successful login]{style="color: #686868;font-size: small"}
:::

\

## 3 Perform a Search {#Performe-search}

We want to use an example to explore the search function of the EarthExplorer: We are looking for all Landsat 8 scenes that depict Berlin in summer 2017 and have a cloud cover of less than 10 %!

EarthExplorer provides four tabs in the search procedure to guide you through your search request:

[![](./img/USGS_019.png)](./img/USGS_019.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[EarthExplorer search tabs]{style="color: #686868;font-size: small"}
:::

**1. Enter Search Criteria**: This one helps defining an area of interest (AOI) and a time span in which data will be found. The most straightforward way to define the AOI is to use the integrated Google Maps by typing in an address or place name, e.g., "Berlin, Alexanderplatz", click ![](./img/USGS_showbutton.png){.alignnone .size-full .wp-image-1245 loading="lazy" width="46" height="25"} and choose one of the prompted suggestions. Designations for geographical longitude and latitude of the desired position are also possible, e.g., "52.5194, 13.4067".

[![](./img/USGS_015.png)](./img/USGS_015.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Defining area of interest (AOI)]{style="color: #686868;font-size: small"}
:::

Furthermore there is a global notation used for cataloging Landsat data, called Worldwide Reference System (WRS), whereby Landsat 8 follows the WRS-2. This system divides the Earth's surface into the recording geometries of the Landsat acquisitions. There are a [WRS-2 overview map](https://landsat.usgs.gov/sites/default/files/images/tools_wrs2_pr_UTM.gif){target="_blank"} and a [WRS-2 Path/Row to Latitude/Longitude converter](https://landsat.usgs.gov/landsat_acq#convertPathRow){target="_blank"} provided by the USGS. Especially the converter helps to find all possible Path-Row combinations for your AOI, which is 192/024 and 193/23 in our case for Berlin. Entering one of those Path/Row pairs and click ![](./img/USGS_showbutton.png){.alignnone .size-full .wp-image-1245 loading="lazy" width="46" height="25"} to add the adequate center of the Landsat acquisition as a coordinate to your Google Map interface:

[![](./img/USGS_016.png)](./img/USGS_016.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Use Path and Row specifications for queries]{style="color: #686868;font-size: small"}
:::

In order to delete any given coordinate, press the red cross ![](./img/USGS_017.png){.alignnone .size-full .wp-image-1250 loading="lazy" width="19" height="19"} next to it.\
Another easy way to define your AOI is to just left click within the map, which automatically adds a coordinate for a single coordinate search. By defining two points on the map, you will do a line search, which results in all data products which intersects the line. By defining three or more coordinates, a polygon is automatically displayed, forming your AOI:

[![](./img/USGS_018.png)](./img/USGS_018.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Polygon defined by four coordinates via left clicking in the Google Map interface]{style="color: #686868;font-size: small"}
:::

There are several other ways to define the subject area more precisely, e.g., by shapefiles, features, predefined areas, or kmls, but the methods described are effective and usually sufficient. For more detailed descriptions please have a look at the [online help](https://earthexplorer.usgs.gov/documents/helptutorial.pdf){target="_blank"}.

To make your query more concrete, you can define the time span within which you want to get data at the bottom of the Search Criteria tab. Simply set the start date and end date as well as all desired months, in our case june, july and august:

[![](./img/USGS_020.png)](./img/USGS_020.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Defining the time span and months of interest]{style="color: #686868;font-size: small"}
:::

**2. Select Your Data Set(s)**: The Data Set tab categorizes datasets into similar data collections. There is a dynamic tree structure, which allows you to expand/ collapse products by pressing on the plus and minus signs next to it. As you can see, there is a huge amount of data to choose from. Landsat 8 Level-1 data can be found at *Landsat* \> *Landsat Collection 1 Level-1* \> *Landsat 8 OLI/TIRS C1 Level-1*:

[![](./img/USGS_021.png)](./img/USGS_021.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Landsat Collection 1 Data Level-1 products]{style="color: #686868;font-size: small"}
:::

Landsat 8 Level-2 data is also available on demand under *Landsat* \> *Landsat Collection 1 Level-2 (On-Demand)* \> *Landsat 8 OLI/TIRS C1 Level-2* (see chapter [Landsat 8](https://blogs.fu-berlin.de/reseda/landsat-8/){target="_blank"} for more information).

**3. Additional Criteria (Optional)**: This tab helps to further narrow the results of your search query by defining additional search criteria, e.g., the allowed proportion of cloud cover over land, absolute cloud cover, day or night as well as Path/Row restrictions. In addition, you can use the unique product ID (e.g., LC08_L1TP_192023_20170830_20170914_01_T1) to find specific individual scenes. Restrict the Land Cloud Cover to "Less than 10%" for our query:

[![](./img/USGS_022.png)](./img/USGS_022.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Additional Criteria tab: cloud cover restrictions]{style="color: #686868;font-size: small"}
:::

**4. Search Results**: When set, click on ![](./img/USGS_023.png){.alignnone .size-full .wp-image-1265 loading="lazy" width="77" height="31"} on the bottom of the Data Search Side Bar or the Results tab on the top to execute your research. You will most likely get four data products as a result (depending on the shape of your AOI):

[![](./img/USGS_024.png)](./img/USGS_024.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Search results]{style="color: #686868;font-size: small"}
:::

Four scenes are not much, are they? A cloud cover under 10% is already pretty strict, when you allow more cloud coverage, the number of scenes will increases. Each product is given a unique ID, as well as a acquisition time and the WGS-2 Path and Row. Furthermore there is a number of overlay and download controls you can choose from for each scene:

[![](./img/USGS_025.png)](./img/USGS_025.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Overlay and download controls]{style="color: #686868;font-size: small"}
:::

-   **1 Show Footprint**: display the contour of a scene on Google Map in true color
-   **2 Show Browse Overlay**: display a preview image of the scene
-   **3 Compare Browse**: activate this button on multiple scenes, then overlay those [here](https://earthexplorer.usgs.gov/browsecompare/map){target="_blank"}
-   **4 Show Metadata and Browse**: display the browse image and full metadata for the selected scene
-   **5 Download Options**: allows registered users to download the selected data
-   **6 Add to Bulk Download**: allows registered users to bulk download the selected data
-   **7 Order Scene**: allows registered users to order or request specialized processing of products
-   **8 Exclude Scene from Results**: delete the particular scene from current result window

\

## 4 Download a Dataset {#Down-sec}

In order to download a single Level-1 scene (see [chapter Landsat 8](https://blogs.fu-berlin.de/reseda/landsat-8/){target="_blank"}), click on **Download Options** ![](./img/USGS_027.png) and choose the last item, which should be the largest file (approximately 700-900 MB for Landsat 8):

[![](./img/USGS_026.png)](./img/USGS_026.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Download options for a Landsat 8 Level-1 scene]{style="color: #686868;font-size: small"}
:::

You will recieve a zipped file, which contains all spectral bands as georeferenced geotiff-files.

Anyway, Level-2 products need a preprocessing and are NOT available for immediate download. In order to acquire Level-2 data, pick Landsat Collection 1 Level-2 in the Data Sets tab (as shown in **2. Select Your Data Set(s)**). In the Result tab you have to use **Order Scene** ![](./img/USGS_028.png){.alignnone .size-full .wp-image-1279 loading="lazy" width="20" height="19"} to put all the wanted scenes in your Item Basket. A number next to your Item Basket shows how many scenes you have chosen:

[![](./img/USGS_029.png)](./img/USGS_029.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Add scenes to Item Basket]{style="color: #686868;font-size: small"}
:::

When you are done, click on Item Basket in the Header Menu Bar to submit your order. You will see a list of all selected scenes. Confirm your selection by pressing Proceed To Checkout:

[![](./img/USGS_030.png)](./img/USGS_030.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Order overview when clicked on Item Basked]{style="color: #686868;font-size: small"}
:::

On the next screen, press Submit Order:

[![](./img/USGS_031.png)](./img/USGS_031.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Submit your order]{style="color: #686868;font-size: small"}
:::

DONE! You will be given a unqiue order ID and a confirmation email will be sent to your email address -- check in your email inbox!

[![](./img/USGS_032.png)](./img/USGS_032.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Order confirmation]{style="color: #686868;font-size: small"}
:::

All Level-2 orders submitted through ESPA are processed within 2-5 days, depending on the size of the order and the backlog already in the system.\
Be patient.\
A second email confirmation will be send when the products are ready for download. From this moment on, all scenes will remain available for 10 days.\
Click on the Order status url in your second confirmation email, which redirects you to the following website:

[![](./img/USGS_033.png)](./img/USGS_033.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Order overview given by the link of the second email]{style="color: #686868;font-size: small"}
:::

Click on your Order ID, which brings you to the download site. Simply click on the download link in order to get your data:

[![](./img/USGS_034.png)](./img/USGS_034.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Finally get your Level-2 data!]{style="color: #686868;font-size: small"}
:::

Follow the search queries in the upcoming exercise to familiarize yourself with how to use the EarthExplorer!

# Landsat BIG DATA {}

The procedures shown in the [previous section](https://blogs.fu-berlin.de/reseda/usgs-earth-explorer/) are sufficient if you want to acquire a few scenes. However, if you need many more scenes, e.g. if you want to do a time series analysis, the manual download becomes a real test of patience.\
There are several ways to perform a mass, or bulk, download for Landsat 8 data. Let us take a look at an application for Level-1 and a method for Level-2 Landsat 8 scenes.

::: {style="background-color: #f1f1f1;padding: 18px 30px 1px"}
In this section, the following content awaits you:

**Bulk Download L8 Level-1 data**\
-- use this when you need about 5-20 Level-1 scenes\
**Bulk Download L8 Level-2 data**\
-- use this when you need about 5-20 Level-2 scenes\
**BIG DATA Download**\
-- use this when you need a lot more scenes...
:::

## Bulk Download L8 Level-1 data

USGS provides an application for bulk-downloading Level-1 Landsat data with a very appropriate name: the Bulk Download Application. The Bulk Download Application is an easy-to-use tool for downloading large quantities of satellite imagery and geospatial data. In order to use it, you have to order your Landsat 8 scenes via the **Add to Bulk Download** option ![](./img/usgs_039.png){.alignnone .size-full .wp-image-1314 width="18" height="18"} as mentioned in the [Download section](./Download.qmd#Down-sec):

[![](./img/usgs_040.png)](./img/usgs_040.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Order imagery by choosing bulk download option]{style="color: #686868;font-size: small"}
:::

Proceed to checkout and confirm your order as shown in the [Download section](https://blogs.fu-berlin.de/reseda/usgs-earth-explorer/#4). After that, a specific order number is given to you by email and on the USGS website:

[![](./img/usgs_041.png)](./img/usgs_041.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Order number provided after submission]{style="color: #686868;font-size: small"}
:::

Now open the application by navigating to *Other* \> *Bulk Download Application* in the start menu. The user interface opens, in which you have to fill in your username and password used for the USGS Earth Explorer orders:

[![](./img/usgs_043.png)](./img/usgs_043.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Log in for bulk downloading]{style="color: #686868;font-size: small"}
:::

Choose your order by its ID and click Select Order:

[![](./img/usgs_044.png)](./img/usgs_044.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Choose the order ID for your download]{style="color: #686868;font-size: small"}
:::

Change the target directory to your liking by clicking on the right top icon to your. We recommend to set this path to "/media/sf_exchange" to not unnecessarily enlarge the VirtualBox storage. Begin your download by pressing Begin Download:

[![](./img/usgs_045.png)](./img/usgs_045.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Begin your bulk download]{style="color: #686868;font-size: small"}
:::

## Bulk Download L8 Level-2 data

Unfortunately, Level-2 data is not supported by the USGS bulk download application as shown in the previous section. Anyway, there is a nice python based script provided by USGS-EROS, which downloads automatically all scenes for you! The source code is open source and can be reviewed on GitHub [via this link](https://github.com/USGS-EROS/espa-bulk-downloader){target="_blank" rel="noopener"} and can also be downloaded [here](https://box.fu-berlin.de/s/ztHcGQtXMKJbcXN/download?path=%2FPython&files=download_espa_order.py){target="_blank" rel="noopener"}. If you are using our VM, the script is locally stored in your document folder under */home/student/Documents/download_espa_order.py*.

First of all, you should follow the guide for ordering Level-2 scenes ([Download section](https://blogs.fu-berlin.de/reseda/usgs-earth-explorer/#4)) and receive the second email with the download confirmation.\
Then open the linux terminal -- it is linked in the taskbar of our VM:

[![](./img/USGS_036.png)](./img/USGS_036.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Linux terminal shortcut in taskbar]{style="color: #686868;font-size: small"}
:::

To initiate the bulk download, you just need one command. Here is the blueprint of this command, in which you need to replace your email address, your username and password before executing:

``` r
/usr/bin/python /home/student/Documents/download_espa_order.py -r 10 -c -o ALL -d /media/sf_exchange/ -e john.doe@gmail.com -u user123 -p password123
```

Explanation: The command needs a python installation to work, so we define the location of python via `/usr/bin/python`. The download script itself is named "download_espa_order.py" and is stored in the documents folder of our VM, so we define its location with `/home/student/Documents/download_espa_order.py`. All individual letters preceded by a minus sign are arguments, which are assigned with the subsequent input. You have to change the email-address `-e [john.doe\@gmail.com](mailto:john.doe@gmail.com){.email}`, the username `-u user123`, and the adequate password `-p password123` to your own settings (USGS login data). For more information on this, have a look at the [readme on GitHub](https://github.com/USGS-EROS/espa-bulk-downloader){target="_blank" rel="noopener"}.\
Type in the whole command without any linebreaks into the terminal:

[![](./img/USGS_035.png)](./img/USGS_035.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Terminal command for bulk downloading Landsat Level-2 data]{style="color: #686868;font-size: small"}
:::

Press the enter-key and watch the script downloading and saving all ordered scenes to your exchange folder `-d /media/sf_exchange/` (you can change this destination folder to your liking):

[![](./img/USGS_037.png)](./img/USGS_037.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Terminal command for bulk downloading Landsat Level-2 data]{style="color: #686868;font-size: small"}
:::

## BIG DATA Download

You can not get enough of data and you have some Terrabyte of disk space available? So, if you just want to download ALL the scenes of a search query (up to 20,000 scenes at once), there is an easy way to do it! When you have completed a search query, as shown in the [Perform a Search section](./Download.qmd#Performe-search), there is an button on top of the scene list which can be used to export your results. This button is only clickable when you are logged in:

[![](./img/usgs_047.png)](./img/usgs_047.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Metadata Export button]{style="color: #686868;font-size: small"}
:::

A small window opens asking what format the metadata should be exported to. Choose "Non-Limited Results" and "CSV" in order to export the metadata of every single file found to a csv-file (which is a text file):

[![](./img/usgs_048.png){.aligncenter .size-full}](./img/usgs_048.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Metadata Export options]{style="color: #686868;font-size: small"}
:::

Click **Export** and you will receive an email with a link to the metadata export file. The processing time and thus the waiting time for the email will vary depending on number of search results requested.\
Click the link in the mail and you will be redirected to a USGS page. Download the zipped csv-file to your harddrive (the exchange folder in our VM is recommended). Unzip the file by right-clicking on it and chose "Extract Here". Next, open the following USGS website:

[https://earthexplorer.usgs.gov/filelist](https://earthexplorer.usgs.gov/filelist){target="_blank" rel="noopener"}

Select **Single Data Set** and choose the type of dataset you want to download via the drop-down menu **Data Set**:

-   **Data Set for Level-1**: Landsat Collection 1 Level-1: Landsat 8 OLI/TIRS C1 Level-1
-   **Data Set for Level-2**: Landsat Collection 1 Level-2 (On-Demand): Landsat 8 OLI/TIRS C1 Level-2

Click the button next to **File** and upload the unzipped .csv-file containing the metadata information. Confirm by pressing **Submit File List**:

[![](./img/usgs_049.png)](./img/usgs_049.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Metadata Export options]{style="color: #686868;font-size: small"}
:::

If you have selected the Level-1 product, select **Bulk Download** on the next page and click on **Submit Order**. Please follow the instructions given in [the bulk download section above](https://blogs.fu-berlin.de/reseda/landsat-big-data-download/#1) to complete your download with the bulk download application.

[![](./img/usgs_050.png)](./img/usgs_050.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Level-1 product Bulk Download order]{style="color: #686868;font-size: small"}
:::

If you have selected the Level-2 product, select **Order** on the next page and click on **Submit Order**, wait for the ESPA confirmation email ([Download section](https://blogs.fu-berlin.de/reseda/usgs-earth-explorer/#4)) and follow the instructions given in the [Bulk Download section above](https://blogs.fu-berlin.de/reseda/landsat-big-data-download/#2):

[![](./img/usgs_051.png)](./img/usgs_051.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Level-2 product Bulk Download order]{style="color: #686868;font-size: small"}
:::

# Sentinel / SciHUB {#SentinelScihub}

You will get to know an online platform that lets you search and download Sentinel 1 and 2 data -- the ESA SciHUB portal. Again, there are ways to download a lot of data automatically -- Have a look at the [section for BIG DATA downloading](./Download.qmd#Sentinelbigdata) and test your knowledge of this section with an exercise!

::: {style="background-color:#f1f1f1;padding:18px 30px 1px"}
In this section, the following content awaits you:

**1 ESA SciHUB User Interface**\
-- visiting ESA SciHUB for the first time\
**2 Registration**\
-- do a registration in order to be allowed to search and download products\
**3 Perform a Search**\
-- create a search query to get products from the database\
**4 Download one or several Datasets**\
-- download Sentinel 1 and 2 products\
**EXERCISE**
:::

\

## 1 ESA SciHUB User Interface

The ESA Open Access Hub, or SciHUB, provides complete, free and open access to Sentinel-1, Sentinel-2 and Sentinel-3 user products. Sentinels products are available at no cost for anybody, provided you accept the [Legal Notice](https://sentinels.copernicus.eu/documents/247904/690755/Sentinel_Data_Legal_Notice){target="_blank"} on the use of Copernicus Sentinel Data and Service Information. You get to the ESA SciHUB via the following URL using any web browser (Firefox in our RESEDA VM):

[https://scihub.copernicus.eu/dhus/#/home](https://scihub.copernicus.eu/dhus/#/home){target="_blank"}

Once loaded, the main SciHUB graphical user interface (GUI) should be visible, which is composed of several key elements:

[![](./img/ESA_001.png)](./img/ESA_001.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[ESA SciHUB user interface]{style="color: #686868;font-size: small"}
:::

-   **1 Search Panel**: provides a full text search, an advanced search option and a save search tool
-   **2 Header Menu Bar**: contains sign up, login and help functionalities
-   **3 Select Map Layer**: choose image data for visualization in the Image View (*Terrain+Overlay*, *Open Street Map* or *Sentinel 2 images*)
-   **4 Image View**: embedded map to visualize search results
-   **5 Drawing Tools and Coordinates**: shows geographical coordinates in longitute and latitute of current coursor position and allows drawing the area of interest (AOI) on the map:
    -   **Pan**: moving the map layer
    -   **Box**: defining a rectangle area of interest
    -   **Polygon**: defining an area of interest enclosed by a polygon shape
    -   **Clear**: deleting the area of interests active on map



## 2 Registration

First of all, same as with USGS EarthExplorer, you need to register in order to fully use the services by clicking on the SIGN UP button in the Header Menu Bar (2) and proceed through the user registration. The registration grants access rights for searching and downloading Sentinels products:

::: {.h5p-iframe-wrapper style=""}
:::

Once you have completed the registration, you should get an email on your given email address to confirm your account. After confirmation you will be redirected to the main ESA Sentinel website. Click on "Open Hub" on this page to be sent to the SciHub portal and log in with your user data. You have successfully logged in if you recognize your username in the upper right area:

::: {.h5p-iframe-wrapper style=""}
:::

\

## 3 Perform a Search

Let us use an example to explore the search function of the ESA SciHUB: We are looking for all Sentinel 2 scenes (Level-1) that depict Berlin in summer 2017 (June, July & August) and have a maximum cloud cover of 10 %!

Unlike [EarthExplorer](./Download.qmd#landsatEarth){target="_blank"}, SciHub does not support Google Maps search. Therefore, the most straightforward way to define your area of interest is to use the **Polygon Tool** in the **5 Drawing Tools and Coordinates** elements to mark your study area. So zoom to Berlin and click on the Polygon-Tool. You can define a polygon by successively defining the vertices by a single left click. The polygon will not be finalized until you click on the first point again, which fills it yellow, as shown in the picture:

[![](./img/ESA_009.png){.aligncenter}](./img/ESA_009.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Drawing an AOI with the Polygon Tool (bottom)]{style="color: #686868;font-size: small"}
:::

It makes sense to filter the results using the advanced search settings icon ![](./img/ESA_011.png), which can be found in the left area of the **1 Search Panel**.

-   **Sort by**: sort results by sensing date, ingestion date or cloud coverage
-   **Order by**: sort results ascending or descending
-   **Sensing Period**: returns all the products whose sensing dates are included in the defined period
-   **Ingestion Period**: returns all the products whose publication dates on the Data Hub are included in the defined period

Sentinel 2 provides the following settings (for more information have a look at [chapter Sentinel 2](./SensorBasics.qmd#sentinel-2){target="_blank"}:

-   **Satellite Platform**: include Sentinel 2-A or Sentinel 2-B; leave blank for both (recommended)

-   **Product Type**: choose S2MSI1C for Level-1 data or S2MSI2Ap for Level-2 data

-   **Relative Orbit Number**: specify relative orbit (more information [here](https://sentinel.esa.int/web/sentinel/missions/sentinel-2/satellite-description/orbit){target="_blank"})

-   **Cloud Cover %**: specify cloud cover allowed; use brackets for a query, for example allow 0 to 10% cloud cover within scene: "$$0 TO
    10$$

Take the query for Sentinel 2 Level-1 products as follows:

[![](./img/ESA_010.png){.aligncenter}](./img/ESA_010.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Advanced Search Tools]{style="color: #686868;font-size: small"}
:::

Press the lens icon ![](./img/ESA_015.png){.alignnone .size-full .wp-image-1384 loading="lazy" width="30" height="32"} to start the query. The Search results list provides all the products matching the submitted search query. Each result consists of thumbnail, the product name, a download-link, the sensing date, the instrument name, the imaging mode, the satellite name and the size of the file in MB. In the upper part of the result window, the current query can be obtained in text form. You can copy this text to the **1 Search Panel** to reproduce the identical query later on.

[![](./img/ESA_012.png){.aligncenter}](./img/ESA_012.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Query results]{style="color: #686868;font-size: small"}
:::

There are the several options for each product when hovering over it with the mouse coursor:

[![](./img/ESA_013.png){.aligncenter}](./img/ESA_013.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Query results]{style="color: #686868;font-size: small"}
:::

-   **1 Select Product**: select items in order to add them to the cart
-   **2 Zoom to Product**: zoom to product in map view
-   **3 View Product Details**: show detailed metadata for product
-   **4 Add Product to Cart**: adding porducts to cart in order to download products
-   **5 Download Product**: directly download product

\

## 4 Download one or several Datasets

In order to download a single Sentinel scene simply click on the download icon ![](./img/ESA_014.png){.alignnone .size-full .wp-image-1383 loading="lazy" width="26" height="25"} and pick a location on your hard drive.

If you want to download multiple datasets, choose **Add Product to Cart**. The shopping cart can be viewed in your user profile in the **2 Header Menu Bar**:

[![](./img/ESA_016.png){.aligncenter}](./img/ESA_016.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Open Cart]{style="color: #686868;font-size: small"}
:::

When you examine your shopping cart, it is possible to select just some of them or to bulk download all of the products in the Cart by clicking on ![](./img/ESA_018.png){.alignnone .size-full .wp-image-1388 width="100"}. A download window will pop up, asking you confirmation to save a ".meta4"-file, containing all the metalinks of the products in the Cart.

[![](./img/ESA_017.png){.aligncenter}](./img/ESA_017.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Open Cart]{style="color: #686868;font-size: small"}
:::

To make use of such a meta4-file, a [download manager](https://en.wikipedia.org/wiki/Comparison_of_download_managers){target="_blank"} is required. For this purpose, we will use the [aria2](https://aria2.github.io/){target="_blank"} download utility, which is already installed in our VM. First of all, open the linux terminal -- it is linked in the taskbar of our VM:

[![](./img/USGS_036.png){.aligncenter}](./img/USGS_036.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Linux terminal shortcut in taskbar]{style="color: #686868;font-size: small"}
:::

Type the following command into the terminal, but you need to replace your `username`, your `password` and the path to your `.meta4-file` before executing. Pay special attention to the quotes containing the username and password, because they must be preserved!

```         
aria2c – max-concurrent-downloads=2 -d /media/sf_exchange – http-user='user123' – http-passwd='password123' -M /media/sf_exchange/products.meta4
```

Explanation: The download utility is addressed by `aria2c`. The max concurrent downloads are limited by ESA to two parallel downloads, so we set it to two (because its better than one...) via `--max-concurrent-downloads=2`. The output directory is set to the exchange directory by `-d /media/sf_exchange`. You could change this directory to your liking.

[![](./img/ESA_019.png){.aligncenter}](./img/ESA_019.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Terminal command for bulk downloading Sentinel 1 / 2 data based on meta4-file]{style="color: #686868;font-size: small"}
:::

# Sentinel BIG DATA {#Sentinelbigdata}

Once again it is time for a BIG DATA download, which is useful when you need dozens or hundreds of scenes. People have come up with some Python (e.g., [sentinelsat](https://pypi.org/project/sentinelsat/){target="_blank"} or [Sentinel_download](https://github.com/olivierhagolle/Sentinel-download){target="_blank"}) and R libraries (e.g., [sentinel2](https://github.com/IVFL-BOKU/sentinel2){target="_blank"}) in recent years to automatically copy Sentinel data from the ESA servers. All of these libraries are based on two Application Program Interfaces (APIs) provided by the ESA Data Hub used for browsing and downloading the data stored in the rolling archives.\
We will take a closer look at ESA's underlying, [official script](https://github.com/SentinelDataHub/Scripts/blob/master/dhusget_0.3.5.sh){target="_blank"}
and we will use it to automatically download ALL records of any of your search queries. The script is named **dhusget.sh** and already deposited in our VM (or [available for download here](https://box.fu-berlin.de/s/e7dGWGKnJPJi47Y){rel="noopener" target="_blank"}). You need to have a Linux Environment with [wget](https://wiki.ubuntuusers.de/wget/){target="_blank"} installed (such as [our VM](https://blogs.fu-berlin.de/reseda/get-your-vm/){target="_blank"}) in order to use the script, which is a Unix shell script (.sh).\
First of all, let us have a look at a blueprint of the command, we will adapt to your needs in the following:

``` r
/home/student/Documents/dhusget.sh -d https://scihub.copernicus.eu/dhus -l 100 -P 1 -C /media/sf_exchange/product_list.csv -u user123 -p password123 -o product -O /media/sf_exchange/sentineldata -R /media/sf_exchange/sentinel_data/failed.txt -F 'query'
```

Explanation: That is a lot of options! Each option is separated from the next by a blank. Anyway, you do not need to modify most of those options:

-   `/home/student/Documents/dhusget.sh`: location of shell script in the VM
-   `-d <https://scihub.copernicus.eu/dhus>`: the URL of the Data Hub Service `-l 100`: number of results per page (100 max.)
-   `-P 1`: page number (each page contains a maximum of 100 results)
-   `-C /media/sf_exchange/product_list.csv`: write all products found to a list and save it as a CSV text file
-   `-u user123`: insert your ESA SciHUB username here
-   `-p password123`: insert your ESA SciHUB password here
-   `-o product`: activate download for the Product ZIP files
-   `-O /media/sf_exchange/sentineldata`: folder where downloaded Sentinel data will be stored
-   `-R /media/sf_exchange/sentinel_data/failed.txt`: file listing products which failed to     download
-   `-F 'query'`: this is the
    full text query you can copy/paste from the ESA SciHUB website

If you use our VM, you just need to replace your username `-u user123` and password `-p password123` with your own login information. Actually, you only need to integrate your search query in `-F 'query'` as a last step. Thus, visit the ESA Sci-HUB portal and set your data query to your liking as shown in [Perform a Search section](https://blogs.fu-berlin.de/reseda/esa-scihub/#3). In the upper part of the result window, the query can be obtained in text form. This is an example of a query giving all Sentinel 2 products sensed between the first and second of June 2018 globally:

[![](./img/ESA_020.png){.aligncenter}](./img/ESA_020.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Free text OpenSearch query example and number of products available]{style="color: #686868;font-size: small"}
:::

You will want to mark and copy the whole query expression and paste it between the simple quotes of the `-F 'query'` option, like so:

``` r
-F ' ( beginPosition:[2018-06-01T00:00:00.000Z TO 2018-06-02T23:59:59.999Z] AND endPosition:[2018-06-01T00:00:00.000Z TO 2018-06-02T23:59:59.999Z] ) AND (platformname:Sentinel-2) '
```

Open a terminal (taskbar in our VM) and type in the complete query, e.g.:

[![](./img/ESA_021.png){.aligncenter}](./img/ESA_021.png)

::: {style="margin: -30px 0 20px 0;text-align: center"}
[Terminal with exemplary download command for 100 Sentinel 2
products]{style="color: #686868;font-size: small"}
:::

By pressing enter it will start downloading up to 100 scenes at once. Previously downloaded scenes will not be downloaded again, and if the internet connection is lost, the download will continue at that point when restarting the script. When a scene is fully loaded, the [MD5 integrity](https://en.wikipedia.org/wiki/MD5){target="_blank"} will be checked, telling you whether the file is complete or not. If not, the scene is written to a text file to notify you `-R/media/sf_exchange/sentinel_data/failed.txt`.

By doing a search query on the ESA SciHUB Website, you can also see the resulting products available (which is the insane amount of 24,360 in our example -- you probably do not need that many). However, for some reason ESA capped the maximum amount of scenes you can query/download at once at 100. Because of that, you will only download the search results 1-100. In order to download search results 101-200 you have to change the result page with the option `-P 2`, for the search results 201-300 set this option to `-P 3`, and so on. If required, this could also be automated, either by a shell script or in R.
