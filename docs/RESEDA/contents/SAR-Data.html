<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>sar-data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../RESEDA/contents/Visualization.html" rel="next">
<link href="../../RESEDA/contents/Preprocess-Optical-Data.html" rel="prev">
<link href="../../img/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/RSG-Logo-RGB.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../projects/index.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../staff/index.html"> 
<span class="menu-text">Staff</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../R-Crash-Course/index.html"> 
<span class="menu-text">R Crash Course</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../RESEDA/index.html" aria-current="page"> 
<span class="menu-text">RESEDA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../About/index.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://blogs.fu-berlin.de/reseda/"> <i class="bi bi-folder-symlink" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/Remote-Sensing-at-FU-Berlin"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text">Github</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:marion.stellmes@fu-berlin.de"> <i class="bi bi-envelope" role="img" aria-label="email">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../RESEDA/contents/Preprocess.html">Preprocess</a></li><li class="breadcrumb-item"><a href="../../RESEDA/contents/SAR-Data.html">SAR Data</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Overview</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Let’s start!</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Preparations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/PrepareYourself.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter in a box</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/QGIS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">QGIS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/R-Studio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/SNAP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SNAP</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Acquire</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Acquireyourdata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter in a box</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/SensorBasics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sensor basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Download.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Download</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Preprocess</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Preprocess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter in a box</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Preprocess-Optical-Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preprocess Optical Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/SAR-Data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">SAR Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualization</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Analyse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Analyse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter in a box</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Machine-Learning-Basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Machine Learning Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Classification-in-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Regression-in-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression in R</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Validate</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Validate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter in a box</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Validate.html#create-samples-in-r" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Create Samples in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Validate.html#label-samples-in-qgis" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Label Samples in QGIS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Validate.html#Accuracy-Matrix" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accuracy Matrix</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../RESEDA/contents/Validate.html#area-adjusted-accuracies" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Area Adjusted Accuracies</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sar-data" id="toc-sar-data" class="nav-link active" data-scroll-target="#sar-data">SAR Data</a></li>
  <li><a href="#intensity-images" id="toc-intensity-images" class="nav-link" data-scroll-target="#intensity-images">Intensity Images</a>
  <ul class="collapse">
  <li><a href="#step-by-step" id="toc-step-by-step" class="nav-link" data-scroll-target="#step-by-step">Step by Step</a></li>
  <li><a href="#Troubleshooting" id="toc-Troubleshooting" class="nav-link" data-scroll-target="#Troubleshooting">Troubleshooting</a></li>
  </ul></li>
  <li><a href="#texture-metrics" id="toc-texture-metrics" class="nav-link" data-scroll-target="#texture-metrics">Texture Metrics</a>
  <ul class="collapse">
  <li><a href="#step-by-step-1" id="toc-step-by-step-1" class="nav-link" data-scroll-target="#step-by-step-1">Step by Step</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="sar-data" class="level1 entry-title">
<h1 class="entry-title">SAR Data</h1>
<p>As optical data, <strong>S</strong>ynthetic <strong>A</strong>perture <strong>R</strong>adar (SAR) data need pre-processing to account for geometric distortions (layover and foreshortening) and for differences in illumination conditions due to topography (shadowing). Additionally, SAR data is often quite noisy because of backscattered radio signal from small features on the earth’s surface. This effect is referred to as salt-and-pepper effect, or speckle noise and needs to be removed by speckle filtering.<br>
As you can see, depending on the application, SAR pre-processing can be quite complicated. The interpretation of SAR data becomes easier once the underlying principles are known and understood in detail. Therefore, it is advisable to attend the seminars “Remote Sensing and Digital Image Processing” and “Advanced Geomatics” in order to gain a basic understanding of the processing of radar and SAR data before you proceed.</p>
<p>Anyway, if you need further details about pre-processing SAR signals, have a look at the <a href="https://sentinel.esa.int/web/sentinel/toolboxes/sentinel-1/tutorials" rel="noopener" target="_blank">ESA tutorials</a>.</p>
<div style="background-color:#f1f1f1;padding:18px 30px 1px">
<p>This section guides you through two complete preprocessing workflows for Sentinel 1 imagery.</p>
<p><a href="../../RESEDA/contents/SAR-Data.html#intensity-images"><strong>Produce Intensity Images from SLC data</strong></a><br>
– generate intensity images from S1 SLC data<br>
– perform a calibration, terrain flattening and terrain correction<br>
<a href="../../RESEDA/contents/SAR-Data.html#texture-metrics"><strong>Gray-Level Co-Occurrence Matrix (GLCM) Texture Metrics</strong></a><br>
– generate 10 texture metrics (Contrast, Dissimilarity, Homogeneity, Angular Second Moment, Energy, Maximum Probability, Entropy, GLCM Mean, GLCM Variance, GLCM Correlation)</p>
</div>
</section>
<section id="intensity-images" class="level1 entry-title">
<h1 class="entry-title">Intensity Images</h1>
<p>We will process a Single Look Complex (SLC) Sentinel 1 scene in order to achieve its VV and VH polarized intensity images. A SLC product is provided in zero-Doppler slant-range geometry. The products include a single look in each dimension and consist of complex samples preserving the phase information.</p>
<p>If you need help with downloading Sentinel data, just have a look at the <a href="../../RESEDA/contents/Download.html#SentinelScihub">previous download chapter</a>. The exemplary S1 scene was acquired over Berlin and shows an urban rural gradient.</p>
<p>Our workflow will contain the following sequential steps. The order of those steps is essential to derive pre-processed intensity images of that region:</p>
<ol type="1">
<li><strong>Read</strong>: Input – import a S1 scene</li>
<li><strong>ThermalNoiseRemoval</strong>: removes electrical fluctuations arising from the random thermal motion of electrons, <a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=8126233" rel="noopener" target="_blank">continue reading</a></li>
<li><strong>Apply-Orbit-File</strong>: step for acquiring the satellite orbit file to get more precise orbit data to improve geocoding and other SAR processing results</li>
<li><strong>Calibration</strong>: corrects a SAR image so that the pixel values truly represent the radar backscatter of the reflecting surface. A calibration is essential for quantitative use of SAR data, <a href="https://sentinel.esa.int/web/sentinel/radiometric-calibration-of-level-1-products" rel="noopener" target="_blank">continue reading</a></li>
<li><strong>TOPSAR-Deburst</strong>: S1 scenes are acquired using the Terrain Observation with Progressive Scans SAR (TOPSAR) technique, resulting in multiple adjacent sub-swaths and demarcation zones between those swaths. This module will remove those demarcation zones <a href="https://sentinel.esa.int/web/sentinel/technical-guides/sentinel-1-sar/products-algorithms/level-1-algorithms/topsar-processing" rel="noopener" target="_blank">continue reading</a></li>
<li><strong>Terrain-Flattening</strong>: Radiometrically “flatten” the image, reducing terrain induced radiometric variations, which is especially important in heavily embossed areas</li>
<li><strong>Terrain-Correction</strong>: will geocode the image by correcting SAR geometric distortions using a digital elevation model (DEM) and producing a map projected product</li>
<li><strong>Subset</strong>: spatially or radiometrically subset the image. Spatial subsets dramatically speed up the whole processing!</li>
<li><strong>Write</strong>: Output – write all bands (mostly VH and/or VV) to a GeoTiff raster file</li>
</ol>
<p><strong>NOTE</strong>: Sentinel data, as well as the SNAP toolbox are subjects to constant changes and development. For example the proposed workflow includes the removal of thermal noise (<em>ThermalNoiseRemoval</em>), which momentarily cannot be applied to scenes acquired after March 23, 2018, as metadata formats changed (<a href="https://scihub.copernicus.eu/news/News00301" rel="noopener" target="_blank">source</a>). Remove this processing step to process data products acquired after this date.</p>
<p><br>
</p>
<section id="step-by-step" class="level2">
<h2 class="anchored" data-anchor-id="step-by-step">Step by Step</h2>
<p>First download the scene with the ID <em>S1A_IW_SLC__1SDV_20170731T165159_20170731T165226_017718_01DAC6_7F9F</em>.<br>
S1 SLC files hold around 7 to 8 GB of data. So this may take some time. <strong>Do not unzip the file</strong> – this is not necessary and only consumes a lot of hard disk space!</p>
<p>Got the S1 scene (or another one)? – Then start <a href="../../RESEDA/contents/SNAP.html">SNAP</a> now!</p>
<p>Open SNAP and click on the graph builder icon <img src="./img/SNAP_buttons_05.png" class="alignnone size-full wp-image-899" width="28" height="32"> in the Toolbar. You will see a new window pop up, which shows a standard graph (containing one <strong>Read</strong> and one <strong>Write</strong> node) in the upper area and some options in the lower area.</p>
<p><a href="./img/sar_003.png"><img src="./img/sar_003.png" class="aligncenter img-fluid"></a></p>
<p>Right click somewhere in the white area at upper window to add new nodes, i.e., processing steps, to the graph. Navigate to the following nodes to add them to your graph:</p>
<ol type="1">
<li><strong><em>Read</em></strong></li>
<li><em>Add</em> &gt; <em>Radar</em> &gt; <em>Radiometric</em> &gt; <strong><em>ThermalNoiseRemoval</em></strong></li>
<li><em>Add</em> &gt; <em>Radar</em> &gt; <strong><em>Apply-Orbit-File</em></strong></li>
<li><em>Add</em> &gt; <em>Radar</em> &gt; <em>Radiometric</em> &gt; <strong><em>Calibration</em></strong></li>
<li><em>Add</em> &gt; <em>Radar</em> &gt; <em>Sentinel-1 TOPS</em> &gt; <strong><em>TOPSAR-Deburst</em></strong></li>
<li><em>Add</em> &gt; <em>Radar</em> &gt; <em>Radiometric</em> &gt; <strong><em>Terrain-Flattening</em></strong></li>
<li><em>Add</em> &gt; <em>Radar</em> &gt; <em>Geometric</em> &gt; <em>Terrain Correction</em> &gt; <strong><em>Terrain Correction</em></strong></li>
<li><em>Add</em> &gt; <em>Raster</em> &gt; <em>Geometric</em> &gt; <strong><em>Subset</em></strong></li>
<li><strong><em>Write</em></strong></li>
</ol>
<p>Each processing step is visualized by a rectangle in the graph. You can drag those rectangles, or nodes, to whichever position you want with pressed left mouse button. Arrange the added nodes to something like this:</p>
<p><a href="./img/sar_002.png"><img src="./img/sar_002.png" class="aligncenter img-fluid"></a></p>
<p>The individual nodes are not yet linked. If you rest the mouse pointer over the right edge of a rectangle, you will see a red arrow. Drag this arrow with pressed left mouse button to the next node in the following order:</p>
<p><a href="./img/sar_001.png"><img src="./img/sar_001.png" class="aligncenter size-full wp-image-2727" loading="lazy" width="364" height="290"></a></p>
<p>Next, click on the Read Node and load your ZIP-compressed Sentinel 1 scene into the Source Product setting. This could take a short moment. <strong>Attention</strong>: From now on, it will always take a little while to switch back and forth between the processing nodes, as SNAP will process and read your data as virtual products in the background!</p>
<p>Now either click through the tabs at the bottom of the Graph Builder window or through the node rectangles to set the following options for all the nodes. You should try to make the settings in order, because graph building in SNAP is quite “fragile” and it may sometimes lead to strange errors, if the modules are not properly build on each other.</p>
<div class="h5p-iframe-wrapper" style="">

</div>
<p><strong>Calibration</strong>: as we will utilize the terrain flattening, we need to process the required beta0 band here.<br>
<strong>Terrain Flattening</strong>: Uncheck the Re-grid method here, as it might cause some errors when the DEM resolution is lower than your source image data and you want to keep your source resolution.<br>
<strong>Terrain Correction</strong>: Choose a <em>Pixel Spacing</em> in m for the final output product, as well as the adequate <em>Map Projektion</em> (WGS 84, EPSG:32633 in our example).<br>
<strong>Subset</strong>: Limit the image data from the outset to your study area, if possible – because all processing steps are only applied to the subset, which saves an enormous amount of computation time. The spatial section in the Subset node should be made using the geographic coordinates. However, the linked map is quite blurred and therefore not much help. However, under the map you can define any spatial subset using the Well-Known Text (WKT) format. There are a number of <a href="http://arthur-e.github.io/Wicket/sandbox-gmaps3.html" target="_blank">simple online tools</a> for creating such WKTs. Copy the entire “Polygon(())” expression into the line below the map within the subset Node and click on the update-button right to the right:<br>
POLYGON((13.11 52.65, 13.70 52.65, 13.70 52.35, 13.11 52.35, 13.11 52.65))</p>
<p>When everything is set, you might want to save your graph. Simply click on “Save” on the bottom of the graph window and choose a file path. After that, start the graph via “Run”. Depending on the size of the study area and the processing nodes, this will take some time. If you run into some Java memory problems here, please refer to the <a href="../../RESEDA/contents/SAR-Data.html#Troubleshooting">troubleshooting section</a> below.</p>
<p>Have a look at the <a href="../../RESEDA/contents/Preprocess-Optical-Data.html#sentinel-2-bulk-preprocessing" rel="noopener" target="_blank">Bulk Processing Section</a> of this course to learn, how to automate the process for many datasets!</p>
<p>After processing is finished, you should get a GeoTiff-file that includes two channels: one VH and one VV intensity image. Those can be viewed directly in SNAP:</p>
<p><a href="./img/sar1_012.png"><img src="./img/sar1_012.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">VV intensity image</span></p>
</div>
<p>In SNAP, you can view the image in decibel (dB) scaling by right-clicking on the intensity image band and select Linear to/from dB to convert the data with the expression 10*log10(Intensity_VV):</p>
<p><a href="./img/sar1_014.png"><img src="./img/sar1_014.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">transform band to dB scaling</span></p>
</div>
<p>Double-click on the new Intensity_VV_db band to open it:</p>
<p><a href="./img/sar1_013.png"><img src="./img/sar1_013.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">VV intensity image in dB scaling</span></p>
</div>
<p>Done!</p>
<p><strong>EXERCISE</strong>:<br>
However, it is possible to extend this workflow. As you can see, this intensity image is quite noisy. Try to reduce the salt and pepper effect by applying a <strong>Single-Product Speckle Filter</strong> to your graph by your own! Click on the button below to see a solution:</p>
<p><a href="https://blogs.fu-berlin.de/reseda/exercise-apply-a-speckle-filter/" target="_blank"><br>
</a></p>
<div style="font-family: 'Noto Sans',sans-serif">
<p><span style="font-size: 30px"><strong>EXERCISE: ADD A SPECKLE FILTER</strong></span></p>
</div>
<p><br>
</p>
</section>
<section id="Troubleshooting" class="level2">
<h2 class="anchored" data-anchor-id="Troubleshooting">Troubleshooting</h2>
<p>Since S1 data is very large (sometimes up to 8 GB per data set), a sufficiently large amount of RAM is required for preprocessing. Especially the <em>calibration</em> and <em>speckle filtering</em> operations are very memory hungry. Your Virtual Machine (or your computer) should be equipped with at least 8 GB of RAM (16 GB recommended for S1 processing). Red error messages, such as <strong>Cannot construct DataBuffer</strong> or <strong>Java Heap Space</strong>, indicate that too little RAM is available for your computer or Java.<br>
Possible solutions:<br>
– In the main toolbar of SNAP, click on Tools &gt; Options. A new window will open, click on the <em>Performance</em> tab and modify the “-Xmx2048m” value in the first line, which says <em>VM Parameter</em> to something like “-Xmx8192m”. This will allocate more memory to the Java virtual machine.<br>
– split the graph into smaller graphs and save the intermediate results.</p>
</section>
</section>
<section id="texture-metrics" class="level1 entry-title">
<h1 class="entry-title">Texture Metrics</h1>
<p>In this section we want to derive the Grey-Level Co-occurrence Matrix (GLCM) texture measurements for a S1 VH intensity raster. However, this workflow is not exclusive for Sentinel 1 data. You can derive GLCM metrics for any given raster, i.e., optical or radat. Due to the low spectral resolution and comparably low signal-to-noise ratio of radar data, the texture metrics are predestined to extend the feature space with meaningful data, e.g., for classification or regression tasks.</p>
<p>Luckily, the derivation of GLCM is done in one command in SNAP. Nevertheless, we want to create a graph file that theoretically allows you to <a href="../../RESEDA/contents/Preprocess-Optical-Data.html#sentinel-2-bulk-preprocessing" rel="noopener" target="_blank">process a lot of data easily via GPT</a>. Have a look at the <a href="../../RESEDA/contents/Preprocess-Optical-Data.html#sentinel-2-bulk-preprocessing" rel="noopener" target="_blank">Bulk Processing Section</a> of this course to learn, how to automate the process for many datasets.<br>
Our workflow will contain the following sequential processing nodes:</p>
<ol type="1">
<li><strong>Read</strong>: Input – import a S1 scene (or any other raster file)</li>
<li><strong>GLCM</strong>: process all GLCM metrics of your choice</li>
<li><strong>Write</strong>: Output – write all GLCM bands into one GeoTiff raster file</li>
</ol>
<p><br>
</p>
<section id="step-by-step-1" class="level2">
<h2 class="anchored" data-anchor-id="step-by-step-1">Step by Step</h2>
<p>First, get a pre-processed S1 image or another raster file of your study area. In the following example, we will use the VH-intensity image of a Sentinel 1 scene, which we derived in <a href="../../RESEDA/contents/SAR-Data.html#intensity-images" rel="noopener" target="_blank">the previous section</a>. You can download this example dataset <a href="../../RESEDA/contents/SAR-Data.html#texture-metrics" rel="noopener" target="_blank">here</a>. It is not advantageous to use a speckle filter before deriving textures, as this eliminates most of the scene’s characteristics.</p>
<p>Open SNAP and click on the graph builder icon <img src="./img/SNAP_buttons_05.png" class="alignnone img-fluid">](./img/sar_003.png){.fancybox .image}</p>
<p>Right click somewhere in the white area in the upper window to add new nodes, i.e., processing steps, to the graph. Navigate to GLCM and add it:</p>
<ol type="1">
<li><strong><em>Read</em></strong></li>
<li><em>Add</em> &gt; <em>Raster</em> &gt; <em>Image Analysis</em> &gt; <em>Texture Analysis</em> &gt; <strong><em>GLCM</em></strong></li>
<li><strong><em>Write</em></strong></li>
</ol>
<p>Each processing step is visualized by a rectangle in the graph. You can drag those rectangles, or nodes, to whichever position you want with pressed left mouse button. Arrange the added nodes to something like this:</p>
<p><a href="./img/sar1_022.png"><img src="./img/sar1_022.png" class="aligncenter img-fluid"></a></p>
<p>The individual nodes are not yet linked. If you rest the mouse pointer over the right edge of a rectangle, you will see a red arrow. Drag this arrow with pressed left mouse button to the next node in the following order:</p>
<p><a href="./img/sar1_021.png"><img src="./img/sar1_021.png" class="aligncenter img-fluid"></a></p>
<p>Next, click on the Read Node and load your raster into the Source Product setting. This could take a short moment. <strong>Attention</strong>: From now on, it will always take a little while to switch back and forth between the processing nodes, as SNAP will process and read your data as virtual products in the background!</p>
<p>Now either click through the tabs at the bottom of the Graph Builder window or through the node rectangles to set the following options for all the nodes. You should try to make the settings in order, because graph building in SNAP is quite “fragile” and it may sometimes lead to strange errors, if the modules are not properly build on each other.</p>
<div class="h5p-iframe-wrapper" style="">

</div>
<p><strong>Parameters of GLCM:</strong><br>
<strong>Source Band</strong>: single input band of your raster, on which GLCM metrics should be derived<br>
<strong>Window Size</strong>: moving window size for calulcating co-occurences<br>
<strong>Angle</strong>: angle from which the neighborhood of two pixels is seen. Preferred: ALL<br>
<strong>Quantizer</strong>: if probabilistic is selected, your GLCM matrix is expressed as probabilities instead of counting the total number of occurrences. Preferred: probabilistic<br>
<strong>Quantization Levels</strong>: Number of gradations in the co-occurrence matrix (e.g., 32 different grey scale values). More quantized levels, less information loss. Less quantized levels, more information loss, but faster processing. Preferred: 32 or 64 levels<br>
<strong>Displacement</strong>: Considered distance between two pixels. Distance of “1” means one pixel to the east from your reference pixel accounts for co-occurence statistics. Preferred: 1-4</p>
<p>When everything is set, you might want to save your graph. Simply click on “Save” on the bottom of the graph window and choose a file path. After that, start the graph via “Run”. Depending on the size of the study area and the processing nodes, this will take some time.</p>
<p>After processing is finished, you should get one GeoTiff-file that includes all selected metrics. Open the file in SNAP and double click the band you want to visualize:</p>
<p><a href="./img/sar1_026.png"><img src="./img/sar1_026.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">GLCM bands in output file</span></p>
</div>
<p>Those are the texture metrics opened in SNAP:</p>
<p><a href="./img/glcm_001.png"><img src="./img/glcm_001.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">Contrast</span></p>
</div>
<p><a href="./img/glcm_002.png"><img src="./img/glcm_002.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">Dissimilarity</span></p>
</div>
<p><a href="./img/glcm_003.png"><img src="./img/glcm_003.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">Homogeneity</span></p>
</div>
<p><a href="./img/glcm_004.png"><img src="./img/glcm_004.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">ASM</span></p>
</div>
<p><a href="./img/glcm_005.png"><img src="./img/glcm_005.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">Energy</span></p>
</div>
<p><a href="./img/glcm_006.png"><img src="./img/glcm_006.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">MAX</span></p>
</div>
<p><a href="./img/glcm_007.png"><img src="./img/glcm_007.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">Entropy</span></p>
</div>
<p><a href="./img/glcm_008.png"><img src="./img/glcm_008.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">GLCMMean</span></p>
</div>
<p><a href="./img/glcm_009.png"><img src="./img/glcm_009.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">GLCMVariance</span></p>
</div>
<p><a href="./img/glcm_010.png"><img src="./img/glcm_010.png" class="aligncenter img-fluid"></a></p>
<div style="margin: -30px 0 20px 0;text-align: center">
<p><span style="color: #686868;font-size: small">GLCMCorrelation</span></p>
</div>
<p><a href="https://pdfs.semanticscholar.org/5140/f1dc83e562de0eb409385480b799e9549d54.pdf" rel="noopener" target="_blank">Haralick et al.&nbsp;1973</a> or <a href="https://www.researchgate.net/publication/315776784_GLCM_Texture_A_Tutorial_v_30_March_2017" rel="noopener" target="_blank">Hall-Beyer 2005</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../RESEDA/contents/Preprocess-Optical-Data.html" class="pagination-link" aria-label="Preprocess Optical Data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Preprocess Optical Data</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../RESEDA/contents/Visualization.html" class="pagination-link" aria-label="Visualization">
        <span class="nav-page-text">Visualization</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><span class="faux-block">© 2023 Fernerkundung und Geoinformatik 1.0</span></p>
</div>   
    <div class="nav-footer-center">
<p><span class="faux-block"><a href="https://www.marvinschmitt.com/blog/website-tutorial-quarto/">View the tutorial for this template!</a></span></p>
</div>
    <div class="nav-footer-right">
<p><span class="faux-block"><a href="https://github.com/marvinschmitt/quarto-website-template/">View source on GitHub</a></span></p>
</div>
  </div>
</footer>




</body></html>